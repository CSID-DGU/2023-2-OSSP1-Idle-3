<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>D3.js Line Chart from JSON Data</title>
  <!-- D3.js 라이브러리 추가 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    /* 그래프 스타일 */
    .line {
      fill: none;
      stroke-width: 2px;
    }
    .g{
      padding: 30px;
    }
  </style>
</head>
<body>
  <h1>JSON 데이터를 이용한 선 그래프</h1>
  <!-- SVG 요소를 담을 공간 -->
  <svg width="510" height="300"></svg>

  <script>
    // JSON 파일에서 데이터 가져오기
    const fileName = "test_4_1_50.json"
    d3.json(fileName).then(function(data) {
      // SVG 요소 선택
      const svg = d3.select("svg");

      // x축 스케일 설정
      const xScale = d3.scaleLinear()
        .domain([0, data.length - 1])
        .range([0, 500]);

      // y축 스케일 설정
      const yScale = d3.scaleLinear()
        .domain([0, 3000])
        .range([100, 0]);

      // x축 생성
      svg.append("g")
        .attr("transform", "translate(40, 100)")
        .call(d3.axisBottom(xScale));

      // y축 생성
      svg.append("g")
        .attr("transform", "translate(40, 0)")
        .call(d3.axisLeft(yScale));


      // 선 생성
      const line_sum = d3.line()
        .x(d => xScale(d.index))
        .y(d => yScale(d.sum));

      const line_gap = d3.line()
        .x(d => xScale(d.index))
        .y(d => yScale(d.gap));

      // const line_alpha = d3.line()
      // .x(d => xScale(d.index))
      // .y(d => yScale(d.alpha));

      // 선 그래프 그리기
      svg.append("path")
        .datum(data)
        .attr("class", "line")
        .attr("transform", "translate(40, 0)")
        .attr("d", line_sum)
        .attr("stroke", "green");

      svg.append("path")
        .datum(data)
        .attr("class", "line")
        .attr("transform", "translate(40, 0)")
        .attr("d", line_gap)
        .attr("stroke", "steelblue");

      svg.append("path")
        .datum(data)
        .attr("class", "line")
        .attr("transform", "translate(40, 0)")
        .attr("d", line_alpha)
        .attr("stroke", "red");

    }).catch(function(error) {
      // 에러 처리
      console.error("데이터를 불러오는 중 에러 발생:", error);
    });
  </script>
</body>
</html>